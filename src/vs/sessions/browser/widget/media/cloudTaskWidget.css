/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.cloud-task-widget {
	display: flex;
	flex-direction: column;
	height: 100%;
	overflow: hidden;
	color: var(--vscode-foreground);
	background: var(--vscode-editor-background);
}

/* --- Status header --- */

.cloud-task-header {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 12px 16px;
	border-bottom: 1px solid var(--vscode-widget-border);
	flex-shrink: 0;
}

.cloud-task-status-badge {
	display: inline-flex;
	align-items: center;
	gap: 4px;
	padding: 2px 8px;
	border-radius: 10px;
	font-size: 11px;
	font-weight: 500;
	white-space: nowrap;
}

.cloud-task-status-badge.status-queued {
	background: var(--vscode-charts-yellow);
	color: var(--vscode-editor-background);
}

.cloud-task-status-badge.status-in_progress {
	background: var(--vscode-charts-blue);
	color: var(--vscode-editor-background);
}

.cloud-task-status-badge.status-completed {
	background: var(--vscode-charts-green);
	color: var(--vscode-editor-background);
}

.cloud-task-status-badge.status-failed,
.cloud-task-status-badge.status-timed_out {
	background: var(--vscode-charts-red);
	color: var(--vscode-editor-background);
}

.cloud-task-status-badge.status-cancelled {
	background: var(--vscode-descriptionForeground);
	color: var(--vscode-editor-background);
}

.cloud-task-status-badge.status-idle,
.cloud-task-status-badge.status-waiting_for_user {
	background: var(--vscode-charts-orange);
	color: var(--vscode-editor-background);
}

.cloud-task-header-info {
	display: flex;
	flex-direction: column;
	min-width: 0;
	flex: 1;
}

.cloud-task-name {
	font-weight: 600;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.cloud-task-repo {
	font-size: 11px;
	color: var(--vscode-descriptionForeground);
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.cloud-task-time {
	font-size: 11px;
	color: var(--vscode-descriptionForeground);
	white-space: nowrap;
	flex-shrink: 0;
}

/* --- Scrollable content --- */

.cloud-task-content {
	flex: 1;
	overflow-y: auto;
	padding: 16px;
}

/* --- Prompt section --- */

.cloud-task-section {
	margin-bottom: 16px;
}

.cloud-task-section-label {
	font-size: 11px;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	color: var(--vscode-descriptionForeground);
	margin-bottom: 6px;
}

.cloud-task-prompt {
	padding: 10px 12px;
	background: var(--vscode-textBlockQuote-background);
	border-left: 3px solid var(--vscode-textBlockQuote-border);
	border-radius: 3px;
	white-space: pre-wrap;
	word-break: break-word;
	line-height: 1.5;
}

/* --- Artifacts --- */

.cloud-task-artifact {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 6px 10px;
	border-radius: 4px;
	cursor: pointer;
	text-decoration: none;
	color: var(--vscode-textLink-foreground);
}

.cloud-task-artifact:hover {
	background: var(--vscode-list-hoverBackground);
}

.cloud-task-artifact .codicon {
	font-size: 14px;
}

/* --- Sessions --- */

.cloud-task-session-item {
	display: flex;
	align-items: center;
	gap: 8px;
	padding: 4px 0;
	font-size: 12px;
}

.cloud-task-session-status {
	width: 8px;
	height: 8px;
	border-radius: 50%;
	flex-shrink: 0;
}

.cloud-task-session-status.status-completed { background: var(--vscode-charts-green); }
.cloud-task-session-status.status-in_progress { background: var(--vscode-charts-blue); }
.cloud-task-session-status.status-queued { background: var(--vscode-charts-yellow); }
.cloud-task-session-status.status-failed { background: var(--vscode-charts-red); }

/* --- Logs --- */

.cloud-task-logs {
	font-family: var(--monaco-monospace-font);
	font-size: 12px;
	line-height: 1.5;
	white-space: pre-wrap;
	word-break: break-word;
	max-height: 400px;
	overflow-y: auto;
	padding: 10px 12px;
	background: var(--vscode-textCodeBlock-background);
	border-radius: 4px;
}

.cloud-task-logs-empty {
	font-style: italic;
	color: var(--vscode-descriptionForeground);
	padding: 10px 12px;
}

/* --- Polling indicator --- */

.cloud-task-polling {
	display: flex;
	align-items: center;
	gap: 6px;
	padding: 8px 12px;
	font-size: 11px;
	color: var(--vscode-descriptionForeground);
}

.cloud-task-polling .codicon-loading {
	animation: cloud-task-spin 1s linear infinite;
}

@keyframes cloud-task-spin {
	from { transform: rotate(0deg); }
	to { transform: rotate(360deg); }
}

/* --- Follow-up input --- */

.cloud-task-followup {
	display: flex;
	gap: 8px;
	padding: 12px 16px;
	border-top: 1px solid var(--vscode-widget-border);
	flex-shrink: 0;
}

.cloud-task-followup-input {
	flex: 1;
	padding: 6px 10px;
	border: 1px solid var(--vscode-input-border);
	background: var(--vscode-input-background);
	color: var(--vscode-input-foreground);
	border-radius: 4px;
	resize: none;
	outline: none;
}

.cloud-task-followup-input:focus {
	border-color: var(--vscode-focusBorder);
}

.cloud-task-followup-input::placeholder {
	color: var(--vscode-input-placeholderForeground);
}

.cloud-task-followup-send {
	padding: 6px 14px;
	border: none;
	border-radius: 4px;
	background: var(--vscode-button-background);
	color: var(--vscode-button-foreground);
	cursor: pointer;
	white-space: nowrap;
	flex-shrink: 0;
}

.cloud-task-followup-send:hover {
	background: var(--vscode-button-hoverBackground);
}

.cloud-task-followup-send:disabled {
	opacity: 0.5;
	cursor: default;
}

/* --- Actions bar --- */

.cloud-task-actions {
	display: flex;
	gap: 8px;
	margin-top: 8px;
}

.cloud-task-action-btn {
	padding: 4px 12px;
	border: 1px solid var(--vscode-button-secondaryBorder, var(--vscode-widget-border));
	background: var(--vscode-button-secondaryBackground);
	color: var(--vscode-button-secondaryForeground);
	border-radius: 4px;
	cursor: pointer;
	font-size: 12px;
}

.cloud-task-action-btn:hover {
	background: var(--vscode-button-secondaryHoverBackground);
}

/* --- Empty state --- */

.cloud-task-empty {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	height: 100%;
	color: var(--vscode-descriptionForeground);
	gap: 8px;
}

.cloud-task-empty .codicon {
	font-size: 32px;
	opacity: 0.5;
}

/* --- Copy Debug link in header --- */

.cloud-task-debug-link {
	display: inline-flex;
	align-items: center;
	gap: 3px;
	cursor: pointer;
	color: var(--vscode-textLink-foreground);
	text-decoration: none;
	padding: 1px 4px;
	border-radius: 3px;
	flex-shrink: 0;
	font-size: 11px;
}

.cloud-task-debug-link:hover {
	color: var(--vscode-textLink-activeForeground);
	background-color: var(--vscode-toolbar-hoverBackground, rgba(127, 127, 127, 0.08));
}

.cloud-task-debug-link .codicon {
	font-size: 12px;
}
